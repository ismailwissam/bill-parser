1.目录结构
  ./           程序目录
  ./work       文件临时目录 程序运行时存放未完成的文件
  ./log        程序日志目录
  ./conf       程序配置目录 
               文件提交目录 有命令行参数指定,不能以/结尾


2.文件命名规则
  a.提交文件名, 单目录为：采集点编号_原文件名,  多目录为：采集点编号_目录名_原文件名
  b.日志文件分为，运行日志(collect_run.xxxxxx.YYYYMMDD) 和 错误日志(collect_err.log, collect_err.log.xxx)
    xxxxxx为采集点编号,  xxx为子进程编号
  c.程序名为：collect
  d.程序配置参数文件为：collect.conf
  
3.程序参数
  collect  [-o file commit path] [-r run path] [-p parallel child number] [-d]
  	       -o changes the file commit directory to that specified in path, default is ./data
  	       -r changes the run directory to that specified in path, default is ./
  	       -p changes the parallel child number, default is 1
  	       -d debug specified
  
4.处理流程

  ##################################################################  
  主流程
  
  清理work目录下文件
  ......
  ##################################################################  

  ##################################################################  
  FUN point_collect(i)
  while(1)
  {
    get_collect_conf(i,collect_conf * my_collect_conf);
    parse_collect_conf(collect_conf * my_collect_conf);
    IF 匹配
    {
      ftp get文件
      备份文件
      提交文件
      CONTINUE
    }
    IF未匹配
    {
      RETURN 0
    }
    IF 失败
    {
      记错误日志
      RETURN 1
    } 
    记错误日志
    RETURN 1
  }
  ##################################################################  

  ##################################################################  
  提交文件
  a.link工作目录文件至提交目录
  b.记录collect_run.YYYYMMDD文件
  c.清理work目录下,xxx_ 开头文件,xxx为子进程编号
  d.修改xxxxxx_run.conf文件
  ##################################################################  

5.临时文件名
----------------------------------------------------------------------------------------------------------------------
在采集过程中
     ftp get的远端文件临时名为：子进程编号(3位数字)_远端文件名
     ftp dir的远端列表临时名为：子进程编号(3位数字)_dir_tmp
  
6.格式
----------------------------------------------------------------------------------------------------------------------
collect.conf 格式
说明：
采集点编号 厂商 设备 ip usr password  采集点目录名 采集点文件名匹配格式 本地备份目录名 是否提交 是否间隔一个文件 
#开头的行不处理(第一个字符是#)
行号必须和采集点编号一致
本地备份目录名,不能以/结尾,not(不区分大小写)时不备份.
是否提交只能为: not(不区分大小写)不提交 或 yes(不区分大小写)提交
是否间隔一个文件只能为: not(不区分大小写)不间隔 或 yes(不区分大小写)间隔

采集点目录名最少包含一个/,最后一个目录项可包含(或是)一个*通配符,以下是采集点目录名的格式
/CDB/buffer/dbill           采集文件为/CDB/buffer 下dbill子目录中的文件
/CDB/buffer/*               采集文件为/CDB/buffer 下所有子目录中的文件
/CDB/buffer/cdma1*          采集文件为/CDB/buffer 下所有以cdma1开头的子目录中的文件
/CDB/buffer/*cdma1          采集文件为/CDB/buffer 下所有以cdma1结尾的子目录中的文件
/CDB/buffer/cdr*gsm         采集文件为/CDB/buffer 下所有以cdr开头并以gsm结尾的子目录中的文件
./                          采集文件为./中的文件

采集点文件名匹配格式,必须包含(或是)一个*通配符,以下是采集点文件名匹配格式
*     所有文件
aa*   aa开头的文件
*bb   bb结尾的文件
cc*dd cc开头并且dd结尾的文件

示例：
<000001> 130.10.10.218 mscbill mscbill /CDB/buffer/dbill * /backup4 yes yes
#<000002> 130.10.10.110 mscbill mscbill  ../buffer/* * /msc5 yes yes


----------------------------------------------------------------------------------------------------------------------
xxxxxx_run.conf 格式

说明：
采集点编号 已采集文件目录(最后一项) 已采集文件(下次采集不包括该文件)

collect.conf中每行对应一个xxxxxx_run.conf文件


示例(000001_run.conf)：
<000001> dbill BJMSC4.2005.05.07.1100.44

----------------------------------------------------------------------------------------------------------------------
collect_run.xxxxxx.YYYYMMDD 格式

说明：
采集点编号 目录名 文件名 开始时间 结束时间 文件大小 是否备份 是否提交
示例：
<000001> /CDB/buffer/dbill BJMSC4.2005.05.07.1100.44 20050526120911 200505260915 321111 1 1
<000001> /CDB/buffer/dbill BJMSC4.2005.05.01.1115.45 20050526120916 200505260918 1221111 1 1
<000002> ../buffer/20050507 BJMSC5.2005.05.07.1100.44 20050526121011 200505261015 321111 1 1
<000002> ../buffer/20050501 BJMSC5.2005.05.01.1115.45 20050526121016 200505261018 1221111 1 1

----------------------------------------------------------------------------------------------------------------------
